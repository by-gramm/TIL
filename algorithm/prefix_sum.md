## 1. 구간 합과 누적 합

아래와 같은 배열에서 특정 구간의 요소들의 합을 구하는 상황을 생각해보자.

```python
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
```

예를 들어, `arr[2]`부터 `arr[7]`까지의 구간의 합을 구하기 위해서는 `3 + 4 + 5 + 6 + 7 + 8 = 33`과 같은 방식으로 구해야 한다. 

그런데 배열의 크기가 크고, 구간합을 여러번 구해야 할 경우 매번 모든 값을 일일이 더하는 것은 비효율적이다. 이러한 경우에 유용한 것이 **구간 합**이다.

구간 합은 **누적 합**을 통해 구할 수 있다.

#### 누적 합

- 배열의 첫 번째 요소부터 해당 요소까지의 합

```python
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
# 누적 합 배열
accumulate = [1, 3, 6, 10, 15, 21, 28, 36, 45, 55]
# accumulate[4] = arr[0] + arr[1] + arr[2] + arr[3] + arr[4]
```

#### 구간 합

- 배열의 특정 구간의 요소들의 합
- `i`번째부터 `j`번째까지의 구간 합 = `j`번째까지의 누적 합 - `i - 1  `번째까지의 누적 합

```python
# 누적 합 배열
accumulate = [1, 3, 6, 10, 15, 21, 28, 36, 45, 55]

# arr[2]에서 arr[7]까지의 구간 합 = accumulate[7] - accumulate[1]
# arr[5]에서 arr[9]까지의 구간 합 = accumulate[9] - accumulate[4]
```

![image-20210812171315457](C:\Users\flowe\algorithm\0812\ready2start\2001_파리퇴치\README.assets\image01.png)

## 2. 응용 - 2차원 구간 합

구간 합을 2차원 배열에 적용하면, 배열 내의 직사각형의 모든 요소의 합도 쉽게 구할 수 있다.

#### 2차원 누적 합

- 배열의 `(0, 0)`을 왼쪽 위 모서리, `(r, c)`를 오른쪽 아래 모서리로 가지는 직사각형 내의 모든 요소의 합

![](C:\Users\flowe\algorithm\0812\ready2start\2001_파리퇴치\README.assets\image02.png)

```python
arr = [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]]

# 2차원 누적 합
accumulate = [[1, 3, 6, 10], [6, 14, 24, 36], [15, 33, 54, 78]]
# accumulate[1][1] = arr[0][0] + arr[0][1] + arr[1][0] + arr[1][1]
# accumulate[1][2] = arr[0][0] + arr[0][1] + arr[0][2] + arr[1][0] + arr[1][1] + arr[1][2]
```

#### 2차원 구간 합

- `(r1, c1)`을 왼쪽 위 모서리, `(r2, c2)`를 오른쪽 아래 모서리로 가지는 직사각형의 모든 요소의 합
- `accumulate[r2][c2] - accumulate[r2][c1 - 1] - accumulate[r1 - 1][c2] + accumulate[r1][c1]`
  - 아래 그림을 통해 위와 같은 식이 나오는 이유를 이해할 수 있다.

![](C:\Users\flowe\algorithm\0812\ready2start\2001_파리퇴치\README.assets\image03.png)


